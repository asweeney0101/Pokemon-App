let pokemonRepository=(()=>{let e=[],t=()=>e,o=t=>{e.push(t)},i=()=>fetch("https://pokeapi.co/api/v2/pokemon/").then(e=>e.json()).then(e=>{e.results.forEach(e=>{o({name:e.name,detailsUrl:e.url})})}).catch(e=>{console.error(e)}),a=e=>fetch(e.detailsUrl).then(e=>e.json()).then(t=>{e.id=t.id,e.height=t.height,e.weight=t.weight,e.image=t.sprites.front_default,e.abilities=t.abilities.map(e=>e.ability.name)}).catch(e=>{console.error(e)}),l=e=>{let t=document.querySelector(".pokemon-list"),o=document.createElement("li");o.classList.add("list-group-item");let i=document.createElement("button");i.classList.add("pokemon-button","btn","btn-primary","btn-block","d-flex","align-items-center"),i.setAttribute("data-toggle","modal"),i.setAttribute("data-target",".modal");let a=document.createElement("img");a.src="https://via.placeholder.com/75",a.alt=`${e.name} image`,a.width=75,a.height=75,a.classList.add("m-1");let l=document.createTextNode(e.name);i.appendChild(a),i.appendChild(l),o.appendChild(i),t.appendChild(o),pokemonRepository.addClickListener(i,e),pokemonRepository.loadDetails(e).then(()=>{a.src=e.image})},n=(e,t)=>{e.addEventListener("click",()=>{r(t)})};function r(e){pokemonRepository.loadDetails(e).then(()=>{let t=document.querySelector(".modal-title"),o=document.querySelector(".modal-body img"),i=document.querySelector(".modal-body p");t.textContent=e.name,o.setAttribute("src",e.image),i.innerHTML=`Height: ${e.height} <br> Weight: ${e.weight} <br> Abilities: ${e.abilities.join(", ")}`})}return{add:o,getAll:t,addListItem:l,loadList:i,loadDetails:a,addClickListener:n}})();function getRandomPokemon(){let e=pokemonRepository.getAll(),t=Math.floor(Math.random()*e.length),o=e[t];showDetails(o)}pokemonRepository.loadList().then(()=>{pokemonRepository.getAll().forEach(e=>{pokemonRepository.addListItem(e)})}),$("#random-pokemon").on("click",getRandomPokemon);